/**
 * visualCaptcha JS (minified) file by emotionLoop - 2013.06.23
 *
 * This file handles the JS for the visualCaptcha plugin.
 *
 * This license applies to this file and others without reference to any other license.
 *
 * @author emotionLoop | http://emotionloop.com
 * @link http://visualcaptcha.net
 * @package visualCaptcha (WordPress)
 * @license GNU GPL v3
 * @version 4.1.0
 */
(function(e){"use strict";var t=false;var n=false;var r=false;var i=false;var s=navigator.userAgent||"Unknown";var o=new RegExp("iPhone|iPad|iPod|Android|Windows (Phone|CE)|Bada|Meego|webOS|Palm|BlackBerry|Nokia|Symbian|PocketPC|Smartphone|Mobile","i");var u=new RegExp("MSIE (6|7|8|9)","i");if(o.test(s)){t=true}if(u.test(s)){r=true}if(window.devicePixelRatio!==undefined&&window.devicePixelRatio>1){n=true}try{var a=document.createElement("audio");if(a.canPlayType){i=true}}catch(f){}if(r){e("div.eL-captcha > div.eL-where2go").addClass("img");e("div.eL-captcha > div.eL-where2go > p").remove()}if(n){e("div.eL-captcha img").each(function(t,n){if(!e(n).attr("src")){return false}var r=e(n).attr("src");if(r.indexOf(".php")!==-1){r=r+"&retina=1"}else{r=r.replace(/(.+)(\.\w{3,4})$/,"$1@2x$2")}e.ajax({url:r,type:"HEAD",success:function(){e(n).attr("src",r)}})});e("div.eL-captcha > div.eL-where2go").addClass("retina")}if(!i){e("div.eL-captcha > .eL-accessibility").hide()}else{e("div.eL-captcha > p.eL-accessibility a").on("click.visualCaptcha touchstart.visualCaptcha",function(t){t.preventDefault();if(!e("div.eL-captcha > div.eL-accessibility").is(":visible")){e("div.eL-captcha > div.eL-accessibility > audio").each(function(){this.load();this.play()});if(!e("#"+window.vCVals.a).length){var n='<input type="text" name="'+window.vCVals.a+'" id="'+window.vCVals.a+'" value="" autocomplete="off">';e("div.eL-captcha > div.eL-accessibility > p").after(n)}}e("div.eL-captcha > p.eL-explanation").stop().slideToggle("fast");e("div.eL-captcha > div.eL-possibilities").stop().slideToggle("fast");e("div.eL-captcha > div.eL-where2go").stop().slideToggle("fast");e("div.eL-captcha > div.eL-accessibility").stop().slideToggle("fast")})}if(!t){e("div.eL-captcha > div.eL-possibilities > img").draggable({opacity:.6,revert:"invalid"});e("div.eL-captcha > div.eL-possibilities").droppable({drop:function(t,n){if(!e("#"+window.vCVals.n).length){return false}if(e("#"+window.vCVals.n).val()===e(n.draggable).data("value")){e("#"+window.vCVals.n).remove()}e("div.eL-captcha > div.eL-where2go").droppable("enable")},accept:"div.eL-captcha > div.eL-possibilities > img"});e("div.eL-captcha > div.eL-where2go").droppable({drop:function(t,n){if(e("#"+window.vCVals.n).length){return false}var r='<input type="hidden" name="'+window.vCVals.n+'" id="'+window.vCVals.n+'" value="'+e(n.draggable).data("value")+'" readonly>';e("#"+window.vCVals.f).append(r);e(this).droppable("disable")},accept:"div.eL-captcha > div.eL-possibilities > img"})}else{e("div.eL-captcha > p.eL-explanation > span.desktopText").hide();e("div.eL-captcha > p.eL-explanation > span.mobileText").show();e("div.eL-captcha > div.eL-possibilities > img").on("click touchstart",function(t){t.preventDefault();var n="div.eL-captcha > div.eL-where2go";var r=this;var i=e(n).position().left+parseInt(e(n).css("margin-left"),10)+parseInt(e(n).css("padding-left"),10)-parseInt(e(r).css("margin-left"),10)-parseInt(e(r).css("padding-left"),10);var s=e(n).position().top+parseInt(e(n).css("margin-top"),10)+parseInt(e(n).css("padding-top"),10)-parseInt(e(r).css("margin-top"),10)-parseInt(e(r).css("padding-top"),10);var o=e(n).width();var u=e(n).height();var a=e(r).width();var f=e(r).height();if(e(r).css("position")==="absolute"){if(!e("#"+window.vCVals.n).length){return false}if(e("#"+window.vCVals.n).val()===e(r).data("value")){e("#"+window.vCVals.n).remove()}e(r).css({position:"relative",left:"auto",top:"auto"})}else{if(e("#"+window.vCVals.n).length){return false}var l='<input type="hidden" name="'+window.vCVals.n+'" id="'+window.vCVals.n+'" value="'+e(r).data("value")+'" readonly>';e("#"+window.vCVals.f).append(l);var c=Math.round(i+o/2-a/2);var h=Math.round(s+u/2-f/2);e(r).css({position:"absolute",left:c,top:h})}})}})(jQuery)